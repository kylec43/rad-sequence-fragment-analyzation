<!DOCTYPE html>
<html>

    <head>

        <meta charset="utf-8">
        <title>RAD-Seq</title>
        <%- include('partials/css.ejs') %>
    </head>

    <body>
        <%- include ('partials/nav.ejs', {page: 'change_password', user}) %>

        <div class="card rad-card margin-center margin-top-lg">
            <div class="rad-card-header">
                <h3 class="card-title rad-card-text-header">Change Password</h3>
            </div>
            <hr>
            <div class="card-body rad-card-body">
                <% if (errorMessage !== null) { %>
                    <p id="error" class="rad-card-error-message text-center"><%- errorMessage %></p>               
                    <br>
                <% } %>
                <% if (successMessage !== null) { %>
                    <p class="text-center rad-card-success-message"><%= successMessage %></p>
                    <br>
                <% } %>
                <form id="change_password_form">
                    <input type="hidden" name="_csrf" value="<%= csrfToken %>">
                    <div class="form-group">
                        <div class="input-group">
                            <div class="input-group-prepend">
                                <span class="input-group-text"> <i class="fa fa-lock"></i> </span>
                            </div>
                            <input class="form-control" id="currentPassword" name="currentPassword" placeholder="Current password" type="password" minlength="6" required>
                        </div>
                    </div>
                    <div class="form-group">
                        <div class="input-group">
                            <div class="input-group-prepend">
                                <span class="input-group-text"> <i class="fa fa-lock"></i> </span>
                            </div>
                            <input class="form-control" id="newPassword" name="newPassword" placeholder="New password" type="password" minlength="6" required>
                        </div>
                    </div>
                    <div class="form-group">
                        <div class="input-group">
                            <div class="input-group-prepend">
                                <span class="input-group-text"> <i class="fa fa-lock"></i> </span>
                            </div>
                            <input class="form-control" id="confirmNewPassword" name="confirmNewPassword" placeholder="Confirm new password" type="password" minlength="6" required>
                        </div>
                    </div>
                    <div class="form-group">
                        <button class="rad-button margin-center" type="button" onclick="changePassword(document.querySelector('#currentPassword').value, document.querySelector('#newPassword').value, document.querySelector('#confirmNewPassword').value, '<%= user.email %>')">Change</button>
                    </div>
                </form>
            </div>
        </div>

        <%- include('partials/scripts.ejs') %>
    </body>


</html>